<!DOCTYPE html>
<html>

<head>
	<link rel="shortcut icon" type="png" href="images/icon/favicon.png">
	<title>Login SignUp</title>
	<link rel="stylesheet" type="text/css" href="loginStyle.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<!-- It will redirect to the Home Page after submitting the form -->
	<script>
		$(document).ready(function () {
			$("form").submit(function () {
				alert("Great Job !");
			});
		});
	</script>
</head>

<body>
	<div class="form-box">
		<div class="button-box">
			<div id="btn"></div>
			<button type="button" class="toggle-btn" id="log" onclick="login()" style="color: #fff;">Log In</button>
			<button type="button" class="toggle-btn" id="reg" onclick="register()">Register</button>
		</div>
		<div class="social-icons">
			<img src="images/icon/fb.png">
			<img src="images/icon/github.1024x994.png">
			<img src="images/icon/linkedin.png">
		</div>

		<!-- Login Form -->
		<form id="login" class="input-group" action="index.html">
			<div class="inp">
				<img src="images/icon/user.png"><input type="text" id="email" class="input-field"
					placeholder="Username or Phone Number" style="width: 88%; border:none;" required="required">
			</div>
			<div class="inp">
				<img src="images/icon/password.png"><input type="password" id="password" class="input-field"
					placeholder="Password" style="width: 88%; border: none;" required="required">
			</div>
			<input type="checkbox" class="check-box">Remember Password
			<button type="submit" id="btnLogIn" class="submit-btn">Log In</button>
		</form>


		<div class="other" id="other">
			<div class="instead">
				<h3>or</h3>
			</div>
			<button class="connect" onclick="google()">
				<img src="images/icon/google.png"><span>Sign in with Google</span>
			</button>
		</div>

		<!-- Registration Form -->
		<form id="register" class="input-group">
			<input type="text" id="fullName" class="input-field" placeholder="Full Name" required="required">
			<input type="email" id="registerEmail" class="input-field" placeholder="Email Address" required="required">
			<input type="password" id="registerPassword" class="input-field" placeholder="Create Password" name="psame"
				required="required">
			<input type="password" id="confirm-password" class="input-field" placeholder="Confirm Password" name="psame"
				required="required">
			<input type="checkbox" class="check-box" id="chkAgree" onclick="goFurther()">I agree to the Terms &
			Conditions
			<button type="submit" id="btnSubmit" class="submit-btn reg-btn">Register</button>
		</form>
	</div>
	<script type="text/javascript" src="script.js"></script>
</body>
<script type="module">
	// Import the functions you need from the SDKs you need
	import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
	import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-analytics.js";
	import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-auth.js"


	const firebaseConfig = {
		apiKey: "AIzaSyC5616FooIAGd1evh7Hl09eQYT8iUs5UJY",
		authDomain: "authentication-9e325.firebaseapp.com",
		projectId: "authentication-9e325",
		storageBucket: "authentication-9e325.appspot.com",
		messagingSenderId: "609048115020",
		appId: "1:609048115020:web:a971e409c5264beb2141e9",
		measurementId: "G-EHRPDJKLWY"
	};

	const app = initializeApp(firebaseConfig);
	const analytics = getAnalytics(app);
	const auth = getAuth();
	console.log(app)

	document.getElementById("btnSubmit").addEventListener("click", function () {
		var email = document.getElementById("registerEmail").value;
		var password = document.getElementById("registerPassword").value;
		var confirmPassword = document.getElementById("confirm-password").value;
		if (password !== confirmPassword) {
			console.error("Passwords do not match.");
			alert("Passwords don't match");
			return;
		}
		createUserWithEmailAndPassword(auth, email, password).then((userCredential) => {
			const user = userCredential.user;
			console.log(user);
			alert("Registration successful");
		}).catch((err) => {
			const errorCode = err.code;
			const errorMessage = err.message;
			console.log(errorMessage);
			alert(errorMessage);
		});
	});

	document.getElementById("btnLogIn").addEventListener("click", function () {
		event.preventDefault();
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;

		signInWithEmailAndPassword(auth, email, password).then((userCredential) => {
			const user = userCredential.user;
			console.log(user);
			alert(user.email + " Login Successfully");
			window.location.href = 'index.html';
		}).catch((err) => {
			const errorCode = err.code;
			const errorMessage = err.message;
			console.log(errorMessage);
			alert(errorMessage);
		});
	});


	document.getElementById("logout").addEventListener("click", function () {
		signOut(auth).then(() => {
			console.log("sign out successfull");
			alert("Sign out successfull")
		}).catch((err) => {
			const errorMessage = err.message;
			console.log("err" + errorMessage)
		})
	})

</script>

</html>